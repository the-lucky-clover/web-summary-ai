#!/bin/bash

echo "ðŸ§ª Manual Extension Test Guide"
echo "=============================="
echo ""
echo "Since Puppeteer has issues with Manifest V3 extensions,"
echo "follow these steps to manually test the extension:"
echo ""
echo "1ï¸âƒ£  LOAD EXTENSION IN CHROME"
echo "   â€¢ Open Chrome/Edge"
echo "   â€¢ Go to: chrome://extensions/"
echo "   â€¢ Enable 'Developer mode' (top right)"
echo "   â€¢ Click 'Load unpacked'"
echo "   â€¢ Select this directory: $(pwd)"
echo ""
echo "2ï¸âƒ£  VERIFY EXTENSION LOADS"
echo "   â€¢ Check for Web Summary AI icon in toolbar"
echo "   â€¢ No errors should appear on extensions page"
echo ""
echo "3ï¸âƒ£  TEST ON A WEB PAGE"
echo "   â€¢ Open a new tab"
echo "   â€¢ Visit any article page (e.g., Wikipedia, Medium)"
echo "   â€¢ Look for floating button (bottom-right corner)"
echo ""
echo "4ï¸âƒ£  TEST FUNCTIONALITY"
echo "   â€¢ Click the floating button"
echo "   â€¢ Summary panel should appear"
echo "   â€¢ Prompt should be generated"
echo "   â€¢ Click extension icon to open popup"
echo ""
echo "5ï¸âƒ£  PRIVACY TEST"
echo "   â€¢ Open DevTools (F12)"
echo "   â€¢ Go to Network tab"
echo "   â€¢ Clear network log"
echo "   â€¢ Click floating button to generate summary"
echo "   â€¢ VERIFY: No external API calls made"
echo "   â€¢ Should only see chrome-extension:// URLs"
echo ""
echo "6ï¸âƒ£  YOUTUBE TEST"
echo "   â€¢ Visit any YouTube video"
echo "   â€¢ Click floating button"
echo "   â€¢ Should extract transcript if available"
echo ""
echo "7ï¸âƒ£  SETTINGS TEST"
echo "   â€¢ Click extension icon"
echo "   â€¢ Click 'Settings' or right-click extension â†’ Options"
echo "   â€¢ Verify all settings load"
echo "   â€¢ Change theme/colors"
echo "   â€¢ Settings should persist"
echo ""
echo "âœ… If all tests pass, extension is working correctly!"
echo ""
echo "Press Ctrl+C to exit or wait for automated check..."
echo ""

# Try to detect if Chrome is available
if command -v open &> /dev/null; then
    read -p "ðŸš€ Open Chrome extensions page now? (y/n) " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]; then
        open -a "Google Chrome" "chrome://extensions/"
        echo "âœ… Opened Chrome extensions page"
        echo "ðŸ’¡ Now load this directory as an unpacked extension"
    fi
fi
